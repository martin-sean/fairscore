# From: https://medium.com/@tranduchanh.ms/deploy-and-manage-production-rails-5-app-with-aws-elastic-beanstalk-3efb0dfe021a

commands:
    01_install_node:
        cwd: /tmp
        command: 'curl --silent --location https://rpm.nodesource.com/setup_8.x | sudo bash -'
        command: 'sudo yum -y install nodejs'

    02_install_yarn:
        cwd: /tmp
        test: '[ ! -f /usr/bin/yarn ] && echo "yarn not installed"'
        command: 'sudo wget https://dl.yarnpkg.com/rpm/yarn.repo -O /etc/yum.repos.d/yarn.repo'
        command: 'sudo yum -y install yarn'

    03_home_dir:
        test: '[ ! -p /home/webapp ] && echo "webapp not exited"'
        command: 'sudo mkdir -p /home/webapp'
        command: 'sudo chmod 777 /home/webapp'