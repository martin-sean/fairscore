<div class="row">
  <% @results.each do |result| %>
    <% media = @media.detect {|m| m.id == result['id']} %>
    <div class="movie-card card m-2">
      <%= image_tag DiscoverHelper::IMG_BASE_URL + result['poster_path'], class: 'movie-poster' if result['poster_path'].present? %>
      <div class="card-body p-3">
        <h6 class="card-title"><%= result['title'] %><small class="text-muted"> (<%= year_from_date(result['release_date']) %>)</small></h6>
      </div>
      <div class="d-flex justify-content-center m-2">
        <% if media.present? %>
          <%= link_to 'Edit Rating', media_path(result['id']), method: :get, class: 'btn btn-full btn-sm btn-light' %>
        <% else %>
          <%= link_to 'Add Media', discover_add_path(media: { id: result['id'], title: result['title'], year: year_from_date(result['release_date']), info: result['overview'] }), method: :post, class: 'btn btn-block btn-sm btn-info' %>
        <% end %>
      </div>
      <div class="card-footer text-center p-3">
        <% score = media_score(media) %>
        <%# Bold text only if there is a score %>
        <% if media.present? && media.zscore_sum != 0 %>
          <strong><%= score %></strong>
        <% else %>
          <small><%= score %></small>
        <% end %>
      </div>
    </div>
  <% end %>
</div>


